[gd_scene load_steps=19 format=3 uid="uid://27pcrtky5351"]

[ext_resource type="PackedScene" uid="uid://c1u78mlkijgj6" path="res://vehicle_c.tscn" id="2_a0r75"]
[ext_resource type="PackedScene" uid="uid://bn8glq8nv3iay" path="res://scatter_area.tscn" id="3_frwls"]
[ext_resource type="PackedScene" uid="uid://blgvik41bktt8" path="res://ray.tscn" id="4_prhgi"]
[ext_resource type="Script" path="res://map_osm_buildings.gd" id="5_3lh8x"]
[ext_resource type="Script" path="res://label.gd" id="5_3tpps"]
[ext_resource type="Script" path="res://path_follow_3d.gd" id="5_at7hv"]
[ext_resource type="PackedScene" uid="uid://c4j08etxcupi3" path="res://map_with_road.glb" id="6_j3p11"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_a4dct"]
albedo_color = Color(0.208497, 0.205814, 0.0698399, 1)

[sub_resource type="BoxMesh" id="BoxMesh_prpe3"]
material = SubResource("StandardMaterial3D_a4dct")
size = Vector3(500, 0.2, 500)

[sub_resource type="BoxShape3D" id="BoxShape3D_2t2gh"]
size = Vector3(500, 0.2, 500)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ng6yo"]
sky_top_color = Color(0.437565, 0.636317, 0.753869, 1)
sky_horizon_color = Color(0.790245, 0.621536, 0.404902, 1)
sky_curve = 0.178381
ground_bottom_color = Color(0.0886725, 0.168492, 0.119331, 1)
ground_horizon_color = Color(0.815686, 0.596078, 0.403922, 1)
ground_curve = 0.03249

[sub_resource type="Sky" id="Sky_3rqpc"]
sky_material = SubResource("ProceduralSkyMaterial_ng6yo")

[sub_resource type="Environment" id="Environment_facnu"]
background_mode = 2
sky = SubResource("Sky_3rqpc")
ambient_light_source = 3
ambient_light_color = Color(0.521508, 0.492856, 0.206881, 1)
ambient_light_sky_contribution = 0.09
ambient_light_energy = 0.35

[sub_resource type="LabelSettings" id="LabelSettings_3he7l"]

[sub_resource type="Curve3D" id="Curve3D_cywbm"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0.148884, 0.498798, 0.00439453, 0, 0, 0, 0, 0, 0, 12.1344, 0.498779, -90.348, 0, 0, 0, 0, 0, 0, 32.2501, 0.498779, -131.058, 0, 0, 0, 0, 0, 0, 63.8605, 0.498779, -420.82),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[sub_resource type="Curve3D" id="Curve3D_pnpsr"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 10.3348, 0, -211.725, 0, 0, 0, 0, 0, 0, -21.5077, 0, 76.5339, 0, 0, 0, 0, 0, 0, -43.2947, 0, 121.225, 0, 0, 0, 0, 0, 0, -56.7021, 0, 212.284),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[sub_resource type="BoxShape3D" id="BoxShape3D_r5m20"]
size = Vector3(3, 3, 3)

[sub_resource type="BoxMesh" id="BoxMesh_f0p2r"]
size = Vector3(3, 3, 3)

[node name="Level1" type="Node3D"]

[node name="Ground" type="StaticBody3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -8.35182, -3, 32.322)
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ground"]
mesh = SubResource("BoxMesh_prpe3")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
shape = SubResource("BoxShape3D_2t2gh")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(-0.996443, -0.0257565, 0.0802365, -1.33602e-08, 0.952145, 0.305645, -0.0842692, 0.304558, -0.948759, 80.0317, 150.021, 0)
visible = false
fov = 118.918

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_facnu")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 60.3192, 0)
shadow_enabled = true

[node name="ray" parent="." node_paths=PackedStringArray("transmitter", "receiver") instance=ExtResource("4_prhgi")]
transmitter = NodePath("../PathTX/PathFollow3D/vehicle_c")
receiver = NodePath("../PathRX/PathFollow3D/AntennaRX")
scatter_group = null
draw_threshold = null
num_subcarriers = null
delta_f = null
carrier_freq = null

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer" node_paths=PackedStringArray("transmitter", "receiver", "distance_label")]
offset_left = 26.0
offset_top = 23.0
offset_right = 252.0
offset_bottom = 112.0
label_settings = SubResource("LabelSettings_3he7l")
script = ExtResource("5_3tpps")
transmitter = NodePath("../../PathTX/PathFollow3D/vehicle_c")
receiver = NodePath("../../PathRX/PathFollow3D/AntennaRX")
distance_label = NodePath(".")

[node name="map_with_road" parent="." instance=ExtResource("6_j3p11")]
transform = Transform3D(1.31134e-07, 0, 1, 0, 1, 0, -1, 0, 1.31134e-07, -31, 0, -17)

[node name="map_osm_buildings" parent="map_with_road" index="1"]
script = ExtResource("5_3lh8x")

[node name="scatters_ord1" type="Node3D" parent="."]
transform = Transform3D(1.31134e-07, 0, 1, 0, 1, 0, -1, 0, 1.31134e-07, -45, -3, -3.93403e-06)

[node name="scatter_area" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33, 6, 16)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area2" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -52.33, 6, 13)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area12" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -48.33, 6, 28)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area3" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21, 6, 26)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area4" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 6, 58)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area5" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 45, 6, 28)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area6" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -23.9, 6, -10)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area7" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 43.1, 6, 80)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area8" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 137.1, 6, 12)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area13" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 69.1, 6, 148)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area9" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -99.9, 6, -21)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area10" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -75.9, 6, 25)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area11" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -102.9, 6, 22)
environment_mesh = NodePath("../../map_with_road")

[node name="scatter_area14" parent="scatters_ord1" node_paths=PackedStringArray("environment_mesh") groups=["ScatterMarkers"] instance=ExtResource("3_frwls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -198.9, 6, -1.99999)
environment_mesh = NodePath("../../map_with_road")

[node name="PathTX" type="Path3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 0, 212)
curve = SubResource("Curve3D_cywbm")

[node name="PathFollow3D" type="PathFollow3D" parent="PathTX"]
transform = Transform3D(0.991313, 2.7433e-08, -0.131501, 0, 1, 2.08613e-07, 0.131501, -2.06802e-07, 0.991313, 0.148884, 0.498798, 0.00439453)
script = ExtResource("5_at7hv")

[node name="vehicle_c" parent="PathTX/PathFollow3D" instance=ExtResource("2_a0r75")]
transform = Transform3D(-0.131502, -1.79023e-15, 0.991319, 2.07451e-07, 1, 2.7519e-08, -0.991319, 2.09269e-07, -0.131502, -1.165, 0.75, -0.048)
script = null

[node name="PathRX" type="Path3D" parent="."]
curve = SubResource("Curve3D_pnpsr")

[node name="PathFollow3D" type="PathFollow3D" parent="PathRX"]
transform = Transform3D(-0.993953, 0, 0.109797, 0, 1, 0, -0.109797, 0, -0.993953, 10.3348, 0, -211.725)
script = ExtResource("5_at7hv")

[node name="AntennaRX" type="CharacterBody3D" parent="PathRX/PathFollow3D"]
transform = Transform3D(0.993954, 0, 0.109797, 0, 1, 0, -0.109797, 0, 0.993954, 0.143, 2.8, -1.751)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="PathRX/PathFollow3D/AntennaRX"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
shape = SubResource("BoxShape3D_r5m20")

[node name="MeshInstance3D" type="MeshInstance3D" parent="PathRX/PathFollow3D/AntennaRX"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
mesh = SubResource("BoxMesh_f0p2r")

[editable path="map_with_road"]
[editable path="PathTX/PathFollow3D/vehicle_c"]
